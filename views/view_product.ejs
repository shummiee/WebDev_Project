<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title><%= title || 'Product View' %></title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
    <%- include('../partials/header') %>
    <%- include('../auth/login') %>
    <%- include('../auth/registration') %>

    <section class="product-detail-container">
        <div class="product-images">
        <img src="/img/<%= product.mainImage %>" alt="Main Product" class="main-image" id="mainProductImage"/>
        <div class="thumbnails">
            <% product.thumbnails.forEach((thumb, index) => { %>
            <img src="/img/<%= thumb %>" alt="Thumb <%= index + 1 %>" data-full="/img/<%= thumb %>" />
            <% }) %>
        </div>

        <p class="like-btn"><i class="far fa-heart"></i> Like Product</p>
        </div>

        <div class="product-details">
        <h1><%= product.name %></h1>
        <p class="price">₱<%= product.price %></p>
        <p class="brand">Brand: <em><%= product.brand %></em></p>
        <p class="stock">Stock: <span class="in-stock"><%= product.stock %></span></p>

        <div class="shipping-info">
            <div>
            <p class="label">Shipping To</p>
            <p class="value"><%= shipping.address %> <i class="fas fa-chevron-down"></i></p>
            </div>
            <div>
            <p class="label">Shipping Fee</p>
            <p class="value">₱<%= shipping.fee %> <i class="fas fa-chevron-down"></i></p>
            </div>
        </div>

        <div class="quantity-section">
            <label for="quantity">Quantity</label>
            <select id="quantity">
            <% for (let i = 1; i <= product.stock; i++) { %>
                <option value="<%= i %>"><%= i %></option>
            <% } %>
            </select>
        </div>

        <div class="action-buttons">
            <button class="add-to-cart"><i class="fas fa-cart-shopping"></i> Add to Cart</button>
            <button class="buy-now">Buy Now <br><strong>₱<%= product.price %></strong></button>
        </div>
        </div>
    </section>

    <%- include('../partials/footer') %>
    
    <script src="/js/main_js.js" defer></script>
    <script src="/js/product_js.js" defer></script>
</body>
</html>
